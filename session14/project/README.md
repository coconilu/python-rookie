# 天气信息获取器

一个基于Python的天气信息查询应用，通过调用OpenWeatherMap API获取实时天气数据。

## 功能特性

- 🌤️ **实时天气查询**：获取指定城市的当前天气信息
- 📅 **天气预报**：查看未来5天的天气预报
- 🏙️ **多城市对比**：同时比较多个城市的天气
- 📊 **数据可视化**：简单的温度趋势图表
- 💾 **历史记录**：保存查询历史，方便回顾
- 🌐 **中文支持**：支持中文城市名和天气描述

## 项目结构

```
project/
├── weather_app.py    # 主程序文件
├── config.py         # 配置文件（API密钥等）
└── README.md         # 项目说明文档
```

## 安装与配置

### 1. 安装依赖

```bash
# 推荐安装requests库以获得更好的体验
pip install requests
```

注：如果没有安装requests，程序会自动使用Python内置的urllib库。

### 2. 获取API密钥

1. 访问 [OpenWeatherMap](https://openweathermap.org/api)
2. 注册免费账号
3. 在 "API keys" 页面获取你的密钥
4. 将密钥填入 `config.py` 文件中的 `API_KEY` 变量

### 3. 配置文件说明

编辑 `config.py` 文件：

```python
# 填入你的API密钥
API_KEY = "your_api_key_here"

# 可以自定义默认城市列表
DEFAULT_CITIES = ["Beijing", "Shanghai", "Guangzhou"]
```

## 使用方法

### 运行程序

```bash
python weather_app.py
```

### 交互式菜单

程序启动后会显示交互式菜单：

```
请选择操作：
1. 查询当前天气
2. 查询天气预报
3. 比较多个城市
4. 查看历史记录
5. 查看默认城市天气
0. 退出
```

### 功能演示

#### 1. 查询当前天气
```
请输入城市名称（英文）: Beijing

==================================================
🏙️  Beijing, CN 天气信息
==================================================
☀️ 天气状况: 晴
🌡️  温度: 25.3°C
🤔 体感温度: 24.8°C
💧 湿度: 45%
🌬️  风速: 3.2 m/s
⏰ 更新时间: 2024-01-15 14:30:00
==================================================
```

#### 2. 天气预报与趋势图
程序会显示未来5天的天气预报，并绘制温度趋势图：

```
温度趋势图
--------------------------------------------------
 30.0°C | ▓▓ ▓▓             ▓▓ ▓▓
 27.5°C | ▓▓ ▓▓ ▓▓       ▓▓ ▓▓ ▓▓
 25.0°C | ▓▓ ▓▓ ▓▓ ▓▓ ▓▓ ▓▓ ▓▓ ▓▓
 22.5°C | ▓▓ ▓▓ ▓▓ ▓▓ ▓▓ ▓▓ ▓▓ ▓▓
         -------------------------
         00:03:06:09:12:15:18:21:
```

#### 3. 城市天气对比
```
城市天气对比
================================================================================
     城市          温度        湿度         天气         风速    
--------------------------------------------------------------------------------
    Beijing       25.3°C       45%      ☀️ Clear       3.2m/s   
    Shanghai      28.1°C       65%      ☁️ Clouds      4.5m/s   
    Guangzhou     30.2°C       78%      🌧️ Rain        2.1m/s   
```

## 模拟模式

如果没有设置API密钥，程序会使用模拟数据运行，方便学习和测试。

## 扩展功能

### 支持的天气类型
- ☀️ Clear - 晴天
- ☁️ Clouds - 多云
- 🌧️ Rain - 雨天
- 🌦️ Drizzle - 毛毛雨
- ⛈️ Thunderstorm - 雷暴
- ❄️ Snow - 下雪
- 🌫️ Mist/Fog - 雾

### 历史记录
程序会自动保存查询历史到 `weather_history.json` 文件，最多保留100条记录。

## 注意事项

1. **API限制**：免费版API有调用次数限制（60次/分钟）
2. **城市名称**：请使用英文城市名，如 Beijing, London, New York
3. **网络连接**：确保有稳定的网络连接
4. **错误处理**：程序包含完整的错误处理，网络问题时会给出提示

## 学习要点

通过这个项目，你可以学到：
- 如何调用REST API
- JSON数据的解析和处理
- 错误处理和异常捕获
- 文件的读写操作
- 简单的数据可视化
- 交互式命令行应用开发

## 可能的改进

1. 添加更多天气API支持
2. 实现图形界面（GUI）
3. 添加天气预警功能
4. 支持更多语言
5. 实现数据导出功能

## 故障排除

### 常见问题

1. **"获取天气信息失败"**
   - 检查网络连接
   - 确认API密钥正确
   - 检查城市名称拼写

2. **"API返回错误: 401"**
   - API密钥无效，请检查config.py

3. **"API返回错误: 404"**
   - 城市名称错误，请使用正确的英文名称

## 贡献

欢迎提出改进建议和Bug报告！

## 许可证

本项目仅供学习使用。 